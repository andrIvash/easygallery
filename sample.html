<!DOCTYPE html>
<html>
<head>
<title></title>
<meta charset="utf-8">
<script type='text/javascript' src='http://code.jquery.com/jquery-2.1.0.js'></script>
<style>
   .maingallery {
   background-color: #fff;
   overflow: hidden;
   z-index: 9999;
   display:none;
   -webkit-box-shadow: 0 0 30px rgba(0,0,0,0.7);
   -moz-box-shadow: 0 0 30px rgba(0,0,0,0.7);
   box-shadow: 0 0 10px rgba(0,0,0,0.7);
   filter: progid:DXImageTransform.Microsoft.shadow(direction=0, color=#000000, strength=10);
}
.maingallery img {
    padding: 5px;
}
.maingallery figcaption {
    margin: 0 auto 5px;
    text-align: center;
    font: bold 0.8em Tahoma, Geneva, sans-serif;
    color: #65747E;
}
</style>
<script>
(function($) {
	$(document).ready(function(){
        $(document).bind('click', function(event){
            var bigImg = $('<img src="#" />').addClass('bigimg'); // make element big image
            var mainGallery = $('<div>').addClass('maingallery'); // make gallery wrapper
            var caption = $('<figcaption>'); // make a image caption
            mainGallery.append(bigImg);
            mainGallery.append(caption);
            var target = event.target||event.srcElement; // check the onclick target
            var newUrl = $(target).data('fileUrl'); // receive url of big image
            var captionText = $(target).attr('title'); // set image caption
            var mainGalleryWidth = $(target).data('fileWidth')+10; // set width of the big image
            var mainGalleryHeight = $(target).data('fileHeight')+40;// set heigth of the big image
            bigImg.attr('src', newUrl); // set url of big image
            mainGallery.css({'width': mainGalleryWidth+'px', 'height': mainGalleryHeight+'px'}); // add size to gallery wrapper
            mainGallery.makeCenter(); // make our gallery centered
            if(!$('.maingallery').length && $(target).hasClass('galleryimg') ) { //append or remove big image
                    $('body').append(mainGallery);
                    $('.maingallery figcaption').text(captionText);
                    $('.maingallery').fadeIn(600);
                } else{
                    $('.maingallery').fadeOut(600);
                    setTimeout('$(".maingallery").remove()', 600);
            };
        });
        $.fn.makeCenter = function() { // centered big image , if height or width are negative - top and left = 20px
            this.css("position", "absolute");
            var positionHeight = (($(window).height() - this.outerHeight()) / 2) + $(window).scrollTop();
            var positionWidth =  (($(window).width() - this.outerWidth()) / 2) + $(window).scrollLeft();
            if (positionHeight < 0 ) positionHeight = 0;
            if (positionWidth < 0 ) positionWidth = 0;
            this.css("top",  positionHeight + "px");
            this.css("left", positionWidth + "px");
            return this;
        };
	});
})(jQuery);
</script>
</head>
<body>
		<img src="http://learn.javascript.ru/files/tutorial/browser/events/gallery/img5-thumb.jpg" class="galleryimg" title="fig1" data-file-url="http://learn.javascript.ru/files/tutorial/browser/events/gallery/img5-lg.jpg" data-file-width="550" data-file-height="400"/>
        <br><br>
		<img src="http://learn.javascript.ru/files/tutorial/browser/events/gallery/img4-thumb.jpg" class="galleryimg" title="fig2" data-file-url="http://learn.javascript.ru/files/tutorial/browser/events/gallery/img4-lg.jpg" data-file-width="550" data-file-height="400"/>
        <br><br>
		<img src="http://learn.javascript.ru/files/tutorial/browser/events/gallery/img3-thumb.jpg" class="galleryimg" title="fig3 " data-file-url="http://learn.javascript.ru/files/tutorial/browser/events/gallery/img3-lg.jpg" data-file-width="550" data-file-height="400"/>



</body>
</html>
